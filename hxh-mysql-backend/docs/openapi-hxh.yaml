openapi: 3.1.0
info:
  title: API Hunter x Hunter - MySQL
  version: "1.0.0"
  description: |
    API REST para gestión de personajes y habilidades de Hunter x Hunter usando MySQL.
    
    **Características:**
    - CRUD completo de Personajes
    - CRUD completo de Habilidades
    - Relación entre Personajes y Habilidades
    - Base de datos MySQL en Railway
    
  contact:
    name: API Support
    url: https://github.com/Yuletzif18/API-Hunter-x-Hunter
servers:
  - url: https://api-hunter-x-hunter-mysql.up.railway.app
    description: Servidor de Producción (Railway)
  - url: http://localhost:3000
    description: Servidor de Desarrollo Local
tags:
  - name: Health
    description: Health check del servicio
  - name: Personajes
    description: Operaciones CRUD para personajes de Hunter x Hunter
  - name: Habilidades
    description: Operaciones CRUD para habilidades de los personajes
paths:
  /health:
    get:
      tags:
        - Health
      summary: Verifica el estado del servicio
      description: Endpoint de health check para Railway
      responses:
        '200':
          description: Servicio operativo
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: OK
                  timestamp:
                    type: string
                    format: date-time
                  database:
                    type: string
                    example: connected
  /api/personajes:
    get:
      tags:
        - Personajes
      summary: Obtener todos los personajes
      description: Retorna la lista completa de personajes registrados en la base de datos
      responses:
        '200':
          description: Lista de personajes obtenida exitosamente
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Personaje'
        '500':
          description: Error interno del servidor
    post:
      tags:
        - Personajes
      summary: Crear un nuevo personaje
      description: Crea un nuevo personaje en la base de datos
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PersonajeInput'
      responses:
        '201':
          description: Personaje creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Personaje'
        '400':
          description: Datos inválidos o incompletos
        '500':
          description: Error interno del servidor
  /api/personajes/{nombre}:
    get:
      tags:
        - Personajes
      summary: Obtener un personaje por nombre
      description: Retorna los detalles de un personaje específico buscando por su nombre
      parameters:
        - in: path
          name: nombre
          required: true
          schema:
            type: string
          description: Nombre del personaje
          example: Gon Freecss
      responses:
        '200':
          description: Personaje encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Personaje'
        '404':
          description: Personaje no encontrado
        '500':
          description: Error interno del servidor
    put:
      tags:
        - Personajes
      summary: Actualizar un personaje por nombre
      description: Actualiza los datos de un personaje existente identificándolo por su nombre
      parameters:
        - in: path
          name: nombre
          required: true
          schema:
            type: string
          description: Nombre del personaje a actualizar
          example: Gon Freecss
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PersonajeInput'
      responses:
        '200':
          description: Personaje actualizado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Personaje'
        '400':
          description: Datos inválidos
        '404':
          description: Personaje no encontrado
        '500':
          description: Error interno del servidor
    delete:
      tags:
        - Personajes
      summary: Eliminar un personaje por nombre
      description: Elimina un personaje de la base de datos por su nombre (también elimina sus habilidades asociadas)
      parameters:
        - in: path
          name: nombre
          required: true
          schema:
            type: string
          description: Nombre del personaje a eliminar
          example: Gon Freecss
      responses:
        '200':
          description: Personaje eliminado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Personaje eliminado correctamente
        '404':
          description: Personaje no encontrado
        '500':
          description: Error interno del servidor
  /api/habilidades:
    get:
      tags:
        - Habilidades
      summary: Obtener todas las habilidades
      description: Retorna la lista completa de habilidades registradas
      responses:
        '200':
          description: Lista de habilidades obtenida exitosamente
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Habilidad'
        '500':
          description: Error interno del servidor
    post:
      tags:
        - Habilidades
      summary: Crear una nueva habilidad
      description: Crea una nueva habilidad asociada a un personaje
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HabilidadInput'
      responses:
        '201':
          description: Habilidad creada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Habilidad'
        '400':
          description: Datos inválidos o incompletos
        '500':
          description: Error interno del servidor
  /api/habilidades/{nombre}:
    get:
      tags:
        - Habilidades
      summary: Obtener habilidades por nombre de personaje
      description: Retorna todas las habilidades asociadas a un personaje específico
      parameters:
        - in: path
          name: nombre
          required: true
          schema:
            type: string
          description: Nombre del personaje
          example: Gon Freecss
      responses:
        '200':
          description: Habilidades encontradas
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Habilidad'
        '404':
          description: No se encontraron habilidades para este personaje
        '500':
          description: Error interno del servidor
    put:
      tags:
        - Habilidades
      summary: Actualizar una habilidad por nombre de personaje
      description: Actualiza los datos de una habilidad identificándola por el nombre del personaje
      parameters:
        - in: path
          name: nombre
          required: true
          schema:
            type: string
          description: Nombre del personaje dueño de la habilidad
          example: Gon Freecss
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HabilidadInput'
      responses:
        '200':
          description: Habilidad actualizada exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Habilidad'
        '400':
          description: Datos inválidos
        '404':
          description: Habilidad no encontrada
        '500':
          description: Error interno del servidor
    delete:
      tags:
        - Habilidades
      summary: Eliminar habilidades por nombre de personaje
      description: Elimina todas las habilidades asociadas a un personaje específico
      parameters:
        - in: path
          name: nombre
          required: true
          schema:
            type: string
          description: Nombre del personaje cuyas habilidades se eliminarán
          example: Gon Freecss
      responses:
        '200':
          description: Habilidades eliminadas exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Habilidades eliminadas correctamente
        '404':
          description: No se encontraron habilidades para este personaje
        '500':
          description: Error interno del servidor
components:
  schemas:
    Personaje:
      type: object
      properties:
        id:
          type: integer
          description: ID único del personaje (auto-generado)
          example: 1
        nombre:
          type: string
          description: Nombre completo del personaje
          example: Gon Freecss
        edad:
          type: integer
          description: Edad del personaje en años
          example: 12
          nullable: true
        altura:
          type: integer
          description: Altura del personaje en centímetros
          example: 154
          nullable: true
        peso:
          type: integer
          description: Peso del personaje en kilogramos
          example: 49
          nullable: true
        genero:
          type: string
          description: Género del personaje
          example: Masculino
          nullable: true
        origen:
          type: string
          description: Lugar de origen del personaje
          example: Isla Ballena
          nullable: true
        habilidad:
          type: string
          description: Habilidad principal o característica distintiva
          example: Jajanken (piedra, papel, tijera)
          nullable: true
        descripcion:
          type: string
          description: Descripción detallada del personaje
          example: Protagonista principal de Hunter x Hunter, busca a su padre Ging.
          nullable: true
        urlImagen:
          type: string
          format: uri
          description: URL de la imagen del personaje
          example: https://example.com/images/gon.jpg
          nullable: true
        createdAt:
          type: string
          format: date-time
          description: Fecha de creación del registro
        updatedAt:
          type: string
          format: date-time
          description: Fecha de última actualización
    PersonajeInput:
      type: object
      required:
        - nombre
      properties:
        nombre:
          type: string
          description: Nombre completo del personaje
          example: Killua Zoldyck
        edad:
          type: integer
          example: 12
        altura:
          type: integer
          example: 158
        peso:
          type: integer
          example: 45
        genero:
          type: string
          example: Masculino
        origen:
          type: string
          example: Montaña Kukuroo
        habilidad:
          type: string
          example: Transmutación de electricidad
        descripcion:
          type: string
          example: Mejor amigo de Gon, proveniente de una familia de asesinos.
        urlImagen:
          type: string
          format: uri
          example: https://example.com/images/killua.jpg
    Habilidad:
      type: object
      properties:
        id:
          type: integer
          description: ID único de la habilidad (auto-generado)
          example: 1
        nombre:
          type: string
          description: Nombre de la habilidad
          example: Jajanken
        tipo:
          type: string
          description: Tipo o categoría de la habilidad
          example: Nen - Potenciador
          nullable: true
        descripcion:
          type: string
          description: Descripción detallada de la habilidad
          example: Técnica de Nen que imita el juego piedra, papel o tijera con diferentes ataques.
          nullable: true
        personaje:
          type: string
          description: Nombre del personaje asociado a esta habilidad
          example: Gon Freecss
        createdAt:
          type: string
          format: date-time
          description: Fecha de creación del registro
        updatedAt:
          type: string
          format: date-time
          description: Fecha de última actualización
    HabilidadInput:
      type: object
      required:
        - nombre
        - personaje
      properties:
        nombre:
          type: string
          description: Nombre de la habilidad
          example: Godspeed
        tipo:
          type: string
          description: Tipo o categoría de la habilidad
          example: Nen - Transmutación
        descripcion:
          type: string
          description: Descripción detallada
          example: Killua canaliza electricidad para aumentar su velocidad.
        personaje:
          type: string
          description: Nombre del personaje dueño de la habilidad
          example: Killua Zoldyck
